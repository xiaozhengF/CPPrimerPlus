#include <iostream>
using namespace std;
/*
这里输入
Hi!
Send $10 or $20 now!
输出为：
Hi!
H$i$!$
$Send $10 or $20 now!
S$e$n$d$ $ct1 = 9, ct2 = 9
这里每输入一行会立刻回显，原因如下：
1.字符逐个处理：cin.get() 每次读取一个字符，while 循环会立即对这个字符进行处理并通过 cout << ch 输出。程序没有将整个输入存储起来再一次性处理，而是实时处理每个字符。
2.行缓冲输入：在终端中，输入是行缓冲的，用户输入一行并按下回车后，这一行字符才会进入输入流供程序读取。因此，当用户输入 "Hi!" 并按回车后，"Hi!\n" 立即可用，程序逐个处理这几个字符并输出 "H$i$!"（加上换行和额外的 '$'）。
3.没有等待完整输入：程序的逻辑是逐字符读取并处理，直到遇到 '$' 为止。它不会等待用户输入所有内容，而是只要有字符可用就立即处理。因此，第一行输入完成后，输出会立即显示，而不是等到第二行输入结束。
*/
int main()
{
    char ch;
    int ct1, ct2;
    ct1 = ct2 = 0;
    while ((ch = cin.get()) != '$')
    {
        cout << ch;
        ct1++;
        if (ch = '$')
            ct2++;
        cout << ch;
    }
    cout << "ct1 = " << ct1 << ", ct2 = " << ct2 << "\n";
    return 0;
}